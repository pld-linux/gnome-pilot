--- gnome-pilot-2.0.13/acinclude.m4~	2003-01-26 23:32:20.000000000 +0200
+++ gnome-pilot-2.0.13/acinclude.m4	2007-01-23 11:29:37.974809889 +0200
@@ -52,10 +52,10 @@
 		piversion_include="pi-version.h"
 	fi
 
-	pi_version=`cat $incdir/pi-version.h|grep PILOT_LINK_VERSION|sed 's/#define PILOT_LINK_VERSION \([[0-9]]*\)/\1/'`
-	pi_major=`cat $incdir/pi-version.h|grep PILOT_LINK_MAJOR|sed 's/#define PILOT_LINK_MAJOR \([[0-9]]*\)/\1/'`
-	pi_minor=`cat $incdir/pi-version.h|grep PILOT_LINK_MINOR|sed 's/#define PILOT_LINK_MINOR \([[0-9]]*\)/\1/'`
-	pi_patch=`cat $incdir/pi-version.h|grep PILOT_LINK_PATCH|sed 's/#define PILOT_LINK_PATCH \"\(.*\)\"/\1/'`
+	pl_version=`grep "define PILOT_LINK_VERSION" "$incdir/pi-version.h" | cut -d " " -f 3`
+	pl_major=`grep "define PILOT_LINK_MAJOR" "$incdir/pi-version.h" | cut -d " " -f 3`
+	pl_minor=`grep "define PILOT_LINK_MINOR" "$incdir/pi-version.h" | cut -d " " -f 3`
+	pl_patch=`grep "define PILOT_LINK_PATCH" "$incdir/pi-version.h" | cut -d " " -f 3 | sed -e 's/"//g'`
 
 	PILOT_LINK_VERSION="$pi_version.$pi_major.$pi_minor$pi_patch"
 
